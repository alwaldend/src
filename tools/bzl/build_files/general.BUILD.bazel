load("@bazel_skylib//rules/directory:directory.bzl", "directory")
load("@rules_pkg//pkg:mappings.bzl", "pkg_files", "strip_prefix")
load("@rules_pkg//pkg:tar.bzl", "pkg_tar")

directory(
    name = "src_directory",
    srcs = glob(["**"]),
    visibility = ["//visibility:public"],
)

filegroup(
    name = "src_filegroup",
    srcs = glob(["**"]),
    visibility = ["//visibility:public"],
)

pkg_files(
    name = "src_files",
    srcs = [":src_filegroup"],
    strip_prefix = strip_prefix.from_pkg(),
    visibility = ["//visibility:public"],
)

pkg_tar(
    name = "src_tar",
    srcs = [":src_filegroup"],
    remap_paths = {"external/{}/".format(repo_name()): ""},
    strip_prefix = ".",
    visibility = ["//visibility:public"],
)
