load("//tools/ansible/main/bzl:al_ansible_scripts.bzl", "AL_ANSIBLE_SCRIPTS")
load("//tools/bzlenv/main/bzl:al_bzlenv_binary.bzl", "al_bzlenv_binary")
load("//tools/docs/main/bzl:al_docs_files.bzl", "al_docs_files")

_ROOT_TOOLS = [
    "blender",
    "pkgsite",
    "secrets",
    "oras",
    # "trufflehog",
    "minisign",
    "taplo",
    "buf",
    "shellcheck",
    "cloc",
    "shfmt",
    "helm",
    "install_file",
    "template_files",
    "replace_section",
    "isort",
    "mypy",
    "hugo",
    "twine",
    "file_installer",
    "pnpm",
    "readme_tree",
    "prettier",
    "postcss",
    "shell_worker",
    "black",
    "flake8",
    "git_filter_repo",
    "tomlv",
    "stylua",
    "dnscontrol",
    "buildifier",
    "release",
]

al_docs_files(
    name = "docs",
    srcs = glob(["*.md"]),
    prefix = package_name(),
    visibility = ["//tools:__pkg__"],
    deps = [
        "//tools/bzlenv/main/bzl:docs",
    ],
)

al_bzlenv_binary(
    name = "bzlenv",
    tools = {
        "gopackagesdriver": "//tools/sh/main/sh:gopackagesdriver",
        "bazel": "//tools/sh/main/sh:bazel",
    } | {
        tool: "//tools/{}".format(tool)
        for tool in _ROOT_TOOLS
    } | {
        script.replace("_", "-"): "//tools/ansible:{}".format(script)
        for script in AL_ANSIBLE_SCRIPTS
    },
)
