load("@rules_kotlin//kotlin:android.bzl", "kt_android_local_test")

[
    kt_android_local_test(
        name = "{}_test".format(file.replace(".kt", "")),
        size = "small",
        srcs = [file],
        manifest = "//projects/android_launcher:manifest",
        test_class = "com.alwaldend.src.kt.android.launcher.{}".format(file.replace(".kt", "")),
        deps = [
            "//projects/android_launcher/main:launcher_library",
            "@com_alwaldend_src_projects_android_launcher_maven//:junit_junit",
            "@com_alwaldend_src_projects_android_launcher_maven//:org_robolectric_robolectric",
            "@rules_robolectric//bazel:android-all",
        ],
    )
    for file in glob(["**/*.kt"])
]

# load("@rules_android//android:rules.bzl", "android_instrumentation_test", "android_library")
#
# android_instrumentation_test(
#     name = "inst",
#     target_device = "@android_test_support//tools/android/emulated_devices/generic_phone:android_36_x86",
#     test_app = "//kt/android/launcher:launcher_binary",
# )
